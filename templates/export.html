{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">{{ t("admin.export.title") }}</h1>

<div class="grid md:grid-cols-2 gap-6">

  <!-- 全量导出 -->
  <form method="post" action="/admin/export/all" class="bg-white shadow rounded-xl p-4 space-y-3">
    <div class="font-semibold mb-2">{{ t("admin.export.all_users_ledger") }}</div>
    <div class="flex flex-col gap-2">
      <button name="kind" value="users_ledger" class="px-4 py-2 rounded-md bg-black text-white">
        {{ t("admin.export.all_users_ledger") }}
      </button>
      <button name="kind" value="users_only" class="px-4 py-2 rounded-md border">
        {{ t("admin.export.users_only") }}
      </button>
      <button name="kind" value="ledger_only" class="px-4 py-2 rounded-md border">
        {{ t("admin.export.ledger_only") }}
      </button>
    </div>
  </form>

  <!-- 指定用户导出 -->
  <form method="post" action="/admin/export/users" class="bg-white shadow rounded-xl p-4 space-y-3">
    <div class="font-semibold">{{ t("admin.export.selected_users") }}</div>
    <p class="text-sm text-gray-500">{{ t("admin.export.users_label") }}</p>
    <textarea name="users" rows="5" class="w-full border rounded-md p-2" placeholder="12345678, @alice, @bob"></textarea>
    <div class="flex gap-3">
      <button name="mode" value="merged" class="px-4 py-2 rounded-md bg-black text-white">
        {{ t("admin.common.download") }} (merged)
      </button>
      <button name="mode" value="split" class="px-4 py-2 rounded-md border">
        split (exports/)
      </button>
    </div>
  </form>

</div>

{% if request.query_params.get("done") %}
  <div class="mt-4 text-green-600 text-sm">{{ t("admin.export.done") }}</div>
{% endif %}
{% endblock %}
